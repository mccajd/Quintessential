[gd_scene load_steps=15 format=3 uid="uid://dhwf2e51q2ran"]

[ext_resource type="Script" uid="uid://br0o7nux181is" path="res://Scripts/player_view.gd" id="1_n05sp"]
[ext_resource type="PackedScene" uid="uid://nrsivx657vil" path="res://Scenes/custom_tile_map.tscn" id="2_abkc4"]
[ext_resource type="Texture2D" uid="uid://csqgdifalte26" path="res://assets/levelbackgrounds/cave level back.png" id="3_6qgxm"]
[ext_resource type="Texture2D" uid="uid://c54oeudwo86og" path="res://assets/symbols/air-symbol.png" id="4_3ig0p"]
[ext_resource type="Texture2D" uid="uid://b11v70jh5tj12" path="res://assets/levelbackgrounds/cave level front.png" id="4_r23hd"]
[ext_resource type="Texture2D" uid="uid://bthkkvdfgam7q" path="res://assets/cave/ancient_monolith.png" id="6_ljin4"]
[ext_resource type="Texture2D" uid="uid://ny7q82gd4jes" path="res://assets/cave/fallen_alchemist.png" id="7_c3xlw"]
[ext_resource type="Texture2D" uid="uid://xvloepc4jf2q" path="res://assets/cave/iron_vein.png" id="8_lc2k8"]
[ext_resource type="Texture2D" uid="uid://cj225qvhmdme1" path="res://assets/cave/limestone_new.png" id="9_vegxm"]
[ext_resource type="Texture2D" uid="uid://c6hx62i102es1" path="res://assets/cave/rock.png" id="10_axvuh"]
[ext_resource type="Texture2D" uid="uid://3nigp5o8g63e" path="res://assets/cave/lamp.png" id="11_plfjd"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_acovp"]
size = Vector2(83.5, 162)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rkfdm"]
size = Vector2(64, 36.75)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5xdmk"]
size = Vector2(136, 40)

[node name="CaveRoom" type="Node"]
script = ExtResource("1_n05sp")

[node name="TileMap" parent="." instance=ExtResource("2_abkc4")]
z_index = 10
position = Vector2(-1, 0)
layer_0/tile_data = PackedInt32Array(917513, 196611, 0, 917512, 196611, 0)
layer_3/tile_data = PackedInt32Array(655377, 65539, 0, 655378, 65539, 0, 655379, 65539, 0, 655380, 65539, 0, 655381, 65539, 0, 655382, 65539, 0, 655383, 65539, 0, 655384, 65539, 0, 655385, 65539, 0, 655386, 65539, 0, 720922, 65539, 0, 720923, 65539, 0, 720924, 65539, 0, 720925, 65539, 0, 655389, 65539, 0, 655390, 65539, 0, 720926, 65539, 0, 655388, 65539, 0, 655387, 65539, 0, 720913, 65539, 0, 720914, 65539, 0, 720915, 65539, 0, 720916, 65539, 0, 720917, 65539, 0, 720918, 65539, 0, 720919, 65539, 0, 720920, 65539, 0, 720921, 65539, 0, 720927, 65539, 0, 655391, 65539, 0, 655408, 65539, 0, 720944, 65539, 0, 720945, 65539, 0, 720946, 65539, 0, 720947, 65539, 0, 655411, 65539, 0, 655410, 65539, 0, 655409, 65539, 0, 589872, 65539, 0, 589873, 65539, 0, 589874, 65539, 0, 589875, 65539, 0, 524339, 65539, 0, 524338, 65539, 0, 524337, 65539, 0, 524336, 65539, 0, 983104, 65539, 0, 983105, 65539, 0, 983106, 65539, 0, 917570, 65539, 0, 917569, 65539, 0, 917568, 65539, 0, 852032, 65539, 0, 852033, 65539, 0, 852034, 65539, 0, 983109, 65539, 0, 983110, 65539, 0, 983112, 65539, 0, 917576, 65539, 0, 852040, 65539, 0, 786504, 65539, 0, 720968, 65539, 0, 655432, 65539, 0, 589896, 65539, 0, 524360, 65539, 0, 458824, 65539, 0, 393288, 65539, 0, 327752, 65539, 0, 327753, 65539, 0, 327754, 65539, 0, 327755, 65539, 0, 327756, 65539, 0, 327757, 65539, 0, 327758, 65539, 0, 327759, 65539, 0, 327760, 65539, 0, 393296, 65539, 0, 458832, 65539, 0, 524368, 65539, 0, 589904, 65539, 0, 655440, 65539, 0, 720976, 65539, 0, 786512, 65539, 0, 852048, 65539, 0, 852047, 65539, 0, 917583, 65539, 0, 983119, 65539, 0, 983120, 65539, 0, 917584, 65539, 0, 983118, 65539, 0, 983117, 65539, 0, 983116, 65539, 0, 983115, 65539, 0, 983114, 65539, 0, 983113, 65539, 0, 917578, 65539, 0, 917579, 65539, 0, 917580, 65539, 0, 917581, 65539, 0, 917582, 65539, 0, 852046, 65539, 0, 852045, 65539, 0, 852044, 65539, 0, 852043, 65539, 0, 852042, 65539, 0, 852041, 65539, 0, 917577, 65539, 0, 786506, 65539, 0, 720970, 65539, 0, 720971, 65539, 0, 655435, 65539, 0, 786507, 65539, 0, 720969, 65539, 0, 786505, 65539, 0, 720972, 65539, 0, 655436, 65539, 0, 655434, 65539, 0, 655433, 65539, 0, 786508, 65539, 0, 720973, 65539, 0, 655437, 65539, 0, 589900, 65539, 0, 589899, 65539, 0, 589898, 65539, 0, 589897, 65539, 0, 524363, 65539, 0, 524362, 65539, 0, 524361, 65539, 0, 458826, 65539, 0, 393290, 65539, 0, 458825, 65539, 0, 393289, 65539, 0, 393291, 65539, 0, 393292, 65539, 0, 393293, 65539, 0, 458827, 65539, 0, 458828, 65539, 0, 393294, 65539, 0, 393295, 65539, 0, 458829, 65539, 0, 458830, 65539, 0, 458831, 65539, 0, 524365, 65539, 0, 524364, 65539, 0, 524366, 65539, 0, 524367, 65539, 0, 589901, 65539, 0, 589902, 65539, 0, 589903, 65539, 0, 655438, 65539, 0, 655439, 65539, 0, 720974, 65539, 0, 786509, 65539, 0, 786510, 65539, 0, 786511, 65539, 0, 720975, 65539, 0, 1048638, 65539, 0, 983102, 65539, 0, 917573, 65539, 0, 917574, 65539, 0, 983101, 65539, 0, 1048637, 65539, 0, 1048639, 65539, 0, 983103, 65539, 0)
layer_4/tile_data = PackedInt32Array(786438, 131075, 0, 720902, 131075, 0, 655366, 131075, 0, 589830, 131075, 0, 524294, 131075, 0, 458758, 131075, 0, 458764, 131075, 0, 720980, 131075, 0, 786516, 131075, 0, 852052, 131075, 0, 917588, 131075, 0, 983124, 131075, 0, 1048660, 131075, 0, 1114196, 131075, 0, 1179732, 131075, 0, 1245268, 131075, 0, 1310804, 131075, 0, 1376340, 131075, 0, 983041, 131075, 0, 1048577, 131075, 0, 1114113, 131075, 0, 1179649, 131075, 0, 524300, 131075, 0, 589836, 131075, 0, 655372, 131075, 0, 720908, 131075, 0, 786444, 131075, 0, 1507389, 131075, 0, 1507388, 131075, 0, 1507390, 131075, 0, 1507391, 131075, 0, 1507392, 131075, 0, 1507393, 131075, 0, 1507394, 131075, 0, 1507395, 131075, 0, 1507396, 131075, 0, 1507397, 131075, 0, 1507398, 131075, 0, 1507399, 131075, 0, 1507400, 131075, 0, 1507401, 131075, 0, 1507402, 131075, 0, 1507403, 131075, 0, 1507404, 131075, 0, 1507405, 131075, 0, 1507406, 131075, 0, 393222, 131075, 0, 327686, 131075, 0, 262150, 131075, 0, 196614, 131075, 0, 196615, 131075, 0, 196616, 131075, 0, 196617, 131075, 0, 196618, 131075, 0, 196619, 131075, 0, 196620, 131075, 0, 262156, 131075, 0, 327692, 131075, 0, 393228, 131075, 0, 1245185, 131075, 0, 1310721, 131075, 0, 1376257, 131075, 0, 1441793, 131075, 0, 1507329, 131075, 0, 1507330, 131075, 0, 1507331, 131075, 0, 1507332, 131075, 0, 1507333, 131075, 0, 1507334, 131075, 0, 1507335, 131075, 0, 1507336, 131075, 0, 1507337, 131075, 0, 1507338, 131075, 0, 1507339, 131075, 0, 1507340, 131075, 0, 1507341, 131075, 0, 1507342, 131075, 0, 1507343, 131075, 0, 1507344, 131075, 0, 1507345, 131075, 0, 1507346, 131075, 0, 1507347, 131075, 0, 1507348, 131075, 0, 1507349, 131075, 0, 1507350, 131075, 0, 1507351, 131075, 0, 1507352, 131075, 0, 1507353, 131075, 0, 1507354, 131075, 0, 1507355, 131075, 0, 1507356, 131075, 0, 1507357, 131075, 0, 1507358, 131075, 0, 1507359, 131075, 0, 1507360, 131075, 0, 1507361, 131075, 0, 1507362, 131075, 0, 1507363, 131075, 0, 1507364, 131075, 0, 1507365, 131075, 0, 1507366, 131075, 0, 1507367, 131075, 0, 1507368, 131075, 0, 1507369, 131075, 0, 1507370, 131075, 0, 1507371, 131075, 0, 1507372, 131075, 0, 1507373, 131075, 0, 1507374, 131075, 0, 1507375, 131075, 0, 1507376, 131075, 0, 1507377, 131075, 0, 1507378, 131075, 0, 1507379, 131075, 0, 1507380, 131075, 0, 1507381, 131075, 0, 1507382, 131075, 0, 1507383, 131075, 0, 1507384, 131075, 0, 1507385, 131075, 0, 1507386, 131075, 0, 1507387, 131075, 0, 1507407, 131075, 0, 1507408, 131075, 0, 1507409, 131075, 0, 1507410, 131075, 0, 1507411, 131075, 0, 1507412, 131075, 0, 1441876, 131075, 0, 655444, 131075, 0, 589908, 131075, 0, 589907, 131075, 0, 589906, 131075, 0, 589905, 131075, 0, 589904, 131075, 0, 589903, 131075, 0, 589902, 131075, 0, 589901, 131075, 0, 589900, 131075, 0, 589899, 131075, 0, 589898, 131075, 0, 589897, 131075, 0, 589896, 131075, 0, 589895, 131075, 0, 589894, 131075, 0, 589893, 131075, 0, 589892, 131075, 0, 589891, 131075, 0, 589890, 131075, 0, 589889, 131075, 0, 589888, 131075, 0, 589887, 131075, 0, 589886, 131075, 0, 589885, 131075, 0, 589884, 131075, 0, 589883, 131075, 0, 589882, 131075, 0, 589881, 131075, 0, 589880, 131075, 0, 589879, 131075, 0, 589878, 131075, 0, 589877, 131075, 0, 589876, 131075, 0, 589875, 131075, 0, 589874, 131075, 0, 589873, 131075, 0, 589872, 131075, 0, 589871, 131075, 0, 589870, 131075, 0, 589869, 131075, 0, 589868, 131075, 0, 589867, 131075, 0, 589866, 131075, 0, 589865, 131075, 0, 589864, 131075, 0, 589863, 131075, 0, 589862, 131075, 0, 589861, 131075, 0, 589860, 131075, 0, 589859, 131075, 0, 589858, 131075, 0, 589857, 131075, 0, 589856, 131075, 0, 589854, 131075, 0, 589853, 131075, 0, 589855, 131075, 0, 589852, 131075, 0, 589851, 131075, 0, 589850, 131075, 0, 589849, 131075, 0, 589848, 131075, 0, 589847, 131075, 0, 589846, 131075, 0, 589845, 131075, 0, 589844, 131075, 0, 589843, 131075, 0, 589842, 131075, 0, 589841, 131075, 0, 589840, 131075, 0, 589839, 131075, 0, 589838, 131075, 0, 589837, 131075, 0, 917505, 131075, 0, 851969, 131075, 0, 786433, 131075, 0, 720897, 131075, 0, 655361, 131075, 0, 589825, 131075, 0, 589826, 131075, 0, 589827, 131075, 0, 589828, 131075, 0, 589829, 131075, 0, 917583, 131075, 0, 917582, 131075, 0, 917581, 131075, 0, 917580, 131075, 0, 917579, 131075, 0, 917578, 131075, 0, 852047, 131075, 0, 786511, 131075, 0, 720975, 131075, 0, 655439, 131075, 0, 852042, 131075, 0, 786507, 131075, 0, 720971, 131075, 0, 655435, 131075, 0, 655436, 131075, 0, 655437, 131075, 0, 655438, 131075, 0, 720972, 131075, 0, 720973, 131075, 0, 720974, 131075, 0, 786509, 131075, 0, 786508, 131075, 0, 786510, 131075, 0, 852044, 131075, 0, 852043, 131075, 0, 852045, 131075, 0, 852046, 131075, 0)
layer_5/tile_data = PackedInt32Array(786443, 3, 0, 786442, 3, 0, 786441, 3, 0, 786440, 3, 0, 786439, 3, 0, 720903, 3, 0, 655367, 3, 0, 589831, 3, 0, 524295, 3, 0, 458759, 3, 0, 393223, 3, 0, 327687, 3, 0, 262151, 3, 0, 262152, 3, 0, 262153, 3, 0, 262154, 3, 0, 262155, 3, 0, 327691, 3, 0, 393227, 3, 0, 458763, 3, 0, 524299, 3, 0, 589835, 3, 0, 655371, 3, 0, 720907, 3, 0, 720906, 3, 0, 720905, 3, 0, 720904, 3, 0, 655368, 3, 0, 655369, 3, 0, 655370, 3, 0, 589834, 3, 0, 524298, 3, 0, 458762, 3, 0, 393226, 3, 0, 327690, 3, 0, 327689, 3, 0, 327688, 3, 0, 393224, 3, 0, 458760, 3, 0, 524296, 3, 0, 589832, 3, 0, 589833, 3, 0, 524297, 3, 0, 458761, 3, 0, 393225, 3, 0)

[node name="Background" type="TextureRect" parent="."]
offset_left = 8.0
offset_top = -274.0
offset_right = 904.0
offset_bottom = 238.0
scale = Vector2(1.5, 1.5)
texture = ExtResource("3_6qgxm")

[node name="ElementBanner" type="TextureRect" parent="."]
offset_left = 552.0
offset_top = -274.0
offset_right = 776.0
offset_bottom = -43.0
scale = Vector2(1.18598, 1.18598)
texture = ExtResource("4_3ig0p")

[node name="Transition" type="ColorRect" parent="."]
visible = false
z_index = 10
offset_left = 2.0
offset_top = -271.0
offset_right = 1365.0
offset_bottom = 504.0
color = Color(0, 0, 0, 1)

[node name="BlackVoid" type="ColorRect" parent="."]
z_index = -1
offset_left = 32.0
offset_top = -264.0
offset_right = 1343.0
offset_bottom = 459.0
color = Color(0, 0, 0, 1)

[node name="BackDetector" type="Area2D" parent="."]
position = Vector2(-332, -90)
collision_layer = 4
collision_mask = 7

[node name="CollisionShape2D" type="CollisionShape2D" parent="BackDetector"]
position = Vector2(486.25, 162)
shape = SubResource("RectangleShape2D_acovp")

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]
layer = 1
follow_viewport_enabled = true

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]

[node name="Foreground" type="TextureRect" parent="ParallaxBackground/ParallaxLayer"]
z_index = 5
offset_left = -183.0
offset_top = -465.6
offset_right = 713.0
offset_bottom = 46.4
scale = Vector2(1.5, 1.5)
texture = ExtResource("4_r23hd")

[node name="Foreground2" type="TextureRect" parent="ParallaxBackground/ParallaxLayer"]
z_index = 5
offset_left = 628.2
offset_top = -466.0
offset_right = 1524.2
offset_bottom = 46.0
scale = Vector2(1.5, 1.5)
texture = ExtResource("4_r23hd")

[node name="Ancient Monolith" type="TextureRect" parent="."]
z_index = 1
offset_left = 1096.0
offset_top = 56.0
offset_right = 1352.0
offset_bottom = 312.0
texture = ExtResource("6_ljin4")
flip_h = true

[node name="Fallen Alchemist" type="TextureRect" parent="."]
z_index = 1
offset_left = 1024.0
offset_top = 192.0
offset_right = 1088.0
offset_bottom = 256.0
texture = ExtResource("7_c3xlw")
expand_mode = 1

[node name="Iron Vein" type="TextureRect" parent="."]
offset_left = 264.0
offset_top = -64.0
offset_right = 520.0
offset_bottom = 192.0
texture = ExtResource("8_lc2k8")

[node name="Limestone" type="TextureRect" parent="."]
offset_left = 736.0
offset_top = 96.0
offset_right = 864.0
offset_bottom = 224.0
texture = ExtResource("9_vegxm")

[node name="Rock" type="TextureRect" parent="."]
offset_left = 1104.0
offset_top = 240.0
offset_right = 1128.0
offset_bottom = 264.0
texture = ExtResource("10_axvuh")
expand_mode = 1

[node name="lamp" type="TextureRect" parent="."]
offset_left = 984.0
offset_top = 240.0
offset_right = 1016.0
offset_bottom = 272.0
texture = ExtResource("11_plfjd")
expand_mode = 1

[node name="FrontDetector" type="Area2D" parent="."]
position = Vector2(1056, 256)
collision_layer = 4
collision_mask = 7

[node name="CollisionShape2D" type="CollisionShape2D" parent="FrontDetector"]
position = Vector2(0, 15.25)
shape = SubResource("RectangleShape2D_rkfdm")

[node name="FrontDetector2" type="Area2D" parent="."]
position = Vector2(1216, 272)
collision_layer = 4
collision_mask = 7

[node name="CollisionShape2D" type="CollisionShape2D" parent="FrontDetector2"]
position = Vector2(4, 4)
shape = SubResource("RectangleShape2D_5xdmk")

[connection signal="item_discovered" from="TileMap" to="." method="_on_item_discovered"]
[connection signal="body_entered" from="BackDetector" to="." method="_on_back_detector_entered"]
[connection signal="body_exited" from="BackDetector" to="." method="_on_back_detector_exited"]
[connection signal="body_entered" from="FrontDetector" to="." method="_on_front_detector_entered"]
[connection signal="body_exited" from="FrontDetector" to="." method="_on_front_detector_exited"]
[connection signal="body_entered" from="FrontDetector2" to="." method="_on_front_detector_entered"]
[connection signal="body_exited" from="FrontDetector2" to="." method="_on_front_detector_exited"]
